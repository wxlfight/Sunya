# 项目决策日志 (Project Decision Log)

本文档记录 Sunya 项目开发过程中的关键决策点、讨论背景和最终决定。

## 2025-04-04: 项目启动与协作模式

*   **决策点:** 如何在长期项目中保持 AI 与人类协作者之间的上下文记忆和沟通效率。
*   **讨论背景:** 认识到长期、探索性项目存在上下文丢失的风险。
*   **方案讨论:**
    *   方案1: 将所有对话存入数据库 (原始记录，但噪音大、结构性差)。
    *   方案2: 采用多层次、结构化的文档体系 (核心文档 + 定期总结 + 结构化沟通 + VCS 注释)。
*   **最终决定:** 采用方案 2。创建并维护以下核心文档：
    *   `README.md`: 项目概览。
    *   `DESIGN.md`: 设计决策、架构、功能规格。
    *   `DECISIONS.md`: 本文件，记录关键决策。
*   **补充决策:**
    *   **协作关系:** 明确 AI 与人类协作者是**队友关系**，AI 应提供坦诚、建设性的反馈，而非盲从。
    *   **文档优先级:** 文档编写优先考虑 **AI 友好性** (清晰、结构化、精确)，同时兼顾人类可读性。

## 2025-04-04: 技术选型与项目起点

*   **决策点:** 确定项目核心技术栈和 MVP 的首个数据源。
*   **讨论背景:** 需要为项目开发选择合适的技术基础，并确定务实的起点。
*   **技术栈讨论:** 考虑了不同技术栈的优劣，特别讨论了 Python 的 AI/数据生态优势与协作者熟悉度之间的权衡。
*   **最终决定 (技术栈):** 采用 **Python (FastAPI) + PostgreSQL + React/Vue (前端待定) + Celery/Redis** 作为核心技术栈。尽管存在学习曲线，但 Python 的长远优势被认为更重要，AI 协作者将提供学习和开发支持。
*   **最终决定 (项目起点):** 确定以**健康数据**为切入点，优先对接**运动手表/手环数据源**，并将 **Garmin API** 作为第一个具体实现的目标，同时在设计中考虑对 Apple HealthKit, Google Fit 等的扩展性。

## 2025-04-04: 引入 Supabase BaaS

*   **决策点:** 是否以及如何将 Supabase (Backend as a Service) 整合到技术栈中。
*   **讨论背景:** 评估 Supabase 作为 Firebase 开源替代品的功能（数据库、认证、即时 API、实时订阅等），旨在遵循"不重复造轮子"原则，加速开发。
*   **方案讨论:**
    *   方案1: 完全依赖 Supabase。
    *   方案2: 混合方案，利用 Supabase 处理数据库、认证、实时等，保留独立的 FastAPI 服务处理复杂对接和 AI 核心逻辑。
*   **最终决定:** 采用**混合方案 (方案2)**。Supabase 将作为核心的数据库 (PostgreSQL)、身份验证、实时消息和基础 API 提供者。保留独立的 FastAPI 服务用于复杂的第三方 API 对接（如 Garmin）和核心 AI 分析。该决策旨在平衡开发速度与核心逻辑的灵活性。
*   **遵循原则:** 此决策符合"不重复造轮子"和"可扩展可插拔设计"的核心原则。 